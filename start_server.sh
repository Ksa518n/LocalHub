#!/bin/bash
# ุณูุฑุจุช ุชุดุบูู LocalHub ุนูู Termux

echo "=================================="
echo "  LocalHub - ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุญูู  "
echo "=================================="
echo ""

# ุงูุงูุชูุงู ุฅูู ูุฌูุฏ ุงููุดุฑูุน
cd "$(dirname "$0")"

# ุงูุชุญูู ูู ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ ุฎุทุฃ: Python3 ุบูุฑ ูุซุจุช"
    echo "ูู ุจุชุซุจูุชู ุจุงุณุชุฎุฏุงู: pkg install python"
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ pip
if ! command -v pip3 &> /dev/null; then
    echo "โ ุฎุทุฃ: pip3 ุบูุฑ ูุซุจุช"
    exit 1
fi

echo "โ ุชู ุงูุนุซูุฑ ุนูู Python $(python3 --version)"
echo ""

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฆ ุฌุงุฑู ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip3 install -r requirements.txt --quiet

if [ $? -ne 0 ]; then
    echo "โ ูุดู ูู ุชุซุจูุช ุงููุชุทูุจุงุช"
    exit 1
fi

echo "โ ุชู ุชุซุจูุช ุงููุชุทูุจุงุช ุจูุฌุงุญ"
echo ""

# ุฅูุดุงุก ุงููุฌูุฏุงุช ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
mkdir -p uploads backups data

# ุจุฏุก ุชุดุบูู ุงูุฎุงุฏู
echo "๐ ุฌุงุฑู ุชุดุบูู ุงูุฎุงุฏู..."
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  ๐ ุงูุฎุงุฏู ูุนูู ุนูู: http://127.0.0.1:5000"
echo "  ๐ ุงููุถุน: ูุญูู ููุท (ุขูู)"
echo "  โจ๏ธ  ููุฅููุงู: ุงุถุบุท Ctrl+C"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# ุชุดุบูู ุงูุชุทุจูู
python3 app.py
